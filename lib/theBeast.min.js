var theBeast=theBeast||function(){function d(a){for(topic in a){if(topic.indexOf("on")==0){if(!c[topic])c[topic]=[];c[topic].push(a)}}}function e(a){for(topic in a){var b=c[topic];if(b){for(var d=0,e;e=b[d];d++)if(e==a)b.splice(d,1)}}}var a=false;var b=[];var c={};modules={};return{modules:{},reset:function(){modules={};theBeast.modules={};c={}},publish:function(d){if(!a){b.push(arguments);return}d=d.replace(/\s/,"");d="on"+d.charAt(0).toUpperCase()+d.slice(1);if(c[d]){for(var e=0,f=c[d].length;e<f;e++){var g=c[d][e];var h=g["this"]||g;g[d].apply(h,Array.prototype.slice.call(arguments,1))}}},add:function(a){for(moduleName in a){var b=a[moduleName];if(typeof b=="function"&&moduleName.indexOf("_"))modules[moduleName]=b}},remove:function(a){if(typeof modules[a]=="function"){for(m in theBeast.modules){var b=m.replace(/-instance-\d*/,"");if(b===a){e(theBeast.modules[m]);delete theBeast.modules[m]}}delete modules[a]}},load:function(){a=false;var c=0;$("[data-theBeast]").each(function(){var a=$(this);var b=a.attr("data-theBeast").split(",");for(var e=0,f=b.length;e<f;e++){var g=b[e].replace(/^\s+|\s+$/g,"");if(theBeast.modules[g]===undefined&&modules[g]!=undefined){theBeast.modules[g]=modules[g]()||true;d(theBeast.modules[g])}var h=theBeast.modules[g];if(typeof h==="object"){if(typeof h.instance==="function"){var i=g+"-instance-"+c;var j=h.instance.call(a);if(j){theBeast.modules[i]=j;j["this"]=a;d(j)}}if(typeof h.executeAnyway==="function")h.executeAnyway.call(a)}}c++});a=true;var c=b.length;while(c--)theBeast.publish.apply(this,b[c]);b=[]}}}()