// theBeast v0.1 - Stanislas Duprey - sduprey@hugeinc.com
var theBeast=theBeast||(function(){var cache={};function subscribe(module){for(topic in module){if(topic.indexOf("on")==0){if(!cache[topic])cache[topic]=[];cache[topic].push(module);}}};function unsubscribe(module){for(topic in module){var topicArray=cache[topic]
for(var i=0,len=topicArray.length;i<len;i++)
if(topicArray[i]==module)topicArray[i].splice(i,1);}};modules={};return{modules:{},publish:function(topic){topic=topic.replace(/\s/,"");topic="on"+topic.charAt(0).toUpperCase()+topic.slice(1).toLowerCase();if(cache[topic]){for(var i=0,len=cache[topic].length;i<len;i++){var module=cache[topic][i];module[topic].call(module,arguments[1]);}}},add:function(newModules){for(moduleName in newModules){var moduleFn=newModules[moduleName]
if(typeof moduleFn=="function")modules[moduleName]=moduleFn;}},remove:function(moduleName){if(typeof modules[moduleName]=="object"){unsubscribe(modules[moduleName])
delete modules[moduleName];}},load:function(){$("[data-theBeast]").each(function(){var $this=$(this);var moduleNames=$this.attr("data-theBeast").split(",");for(var i=0,len=moduleNames.length;i<len;i++){var moduleName=moduleNames[i].replace(/^\s+|\s+$/g,'');if(theBeast.modules[moduleName]===undefined&&modules[moduleName]!=undefined){theBeast.modules[moduleName]=modules[moduleName]()||true;subscribe(theBeast.modules[moduleName]);}
var currentModule=theBeast.modules[moduleName];if(typeof currentModule==="object"&&typeof currentModule.executeAnyway==="function")
currentModule.executeAnyway.call($this);}});},}})()
$(document).ready(function(){theBeast.load();});